TODAY=new Date;dateutil={today:TODAY,years18:new Date((new Date).setDate(TODAY.getDate()-365*18)),years2:new Date((new Date).setDate(TODAY.getDate()-365*2))};smart={sameAs:function(sender,target){var $sender=$(sender);var $form=$sender.parents(".form-container");var $target=$form.find("[data-flex='"+target+"']");if($sender.val()==$target.val()){$sender.css("background-color","#d7f6ca")}else{$sender.css("background-color","#e1adad")}},preventSubmit:function(sender){var $form=$(sender).parents("form");var $target=$form.find("input[type=submit]");var valid=false;if($(sender).is('input[type="checkbox"]')){valid=$(sender).is(":checked")}else if($(sender).is('input[type="radio"]')){valid=$(sender).val()=="y"}else{valid=!!$(sender).val()}if(valid){$target.prop("disabled",false)}else{$target.prop("disabled",true)}},showHideInForm:function(sender,target,showHide){try{var $form=$(sender).parents(".form-container");var $target=$form.find(target);if(showHide){$target.show()}else{$target.hide()}}catch(error){console.error(error)}},setRequiredOnValue:function(sender,targets,value){try{console.log(11111,targets);var cmp=value.toLowerCase();var $form=$(sender).parents(".form-container");$form.find(targets).each(function(i,e){$c=$(e).parents(".field-container");if($(sender).val()==cmp){$(e).attr("required",true);$c.find(".required-label").show()}else{$(e).attr("required",false);$c.find(".required-label").hide()}})}catch(error){console.error(error)}},showHideDependant:function(sender,target,value){try{var cmp=value.toLowerCase();var $form=$(sender).parents(".form-container");var $target=$form.find(target).parents(".field-container");if($(sender).val()==cmp){$target.show()}else{$target.hide()}}catch(error){console.error(error)}},setDependant:function(sender,target,value){try{var $form=$(sender).parents(".form-container");var $target=$form.find(target);$target.prop("disabled",!($(sender).val()==value))}catch(error){console.error(error)}},is_adult:function(d){return d&&Date.parse(d)<=dateutil.years18?true:false},handleQuestion:function(e){var $container=$(e).parents("fieldset").find(".field-container");if($(e).is(":checked")){$container.show()}else{$container.hide()}},updateDeleteLabel:function(sender,label){$(sender).parents(".form-container").find(".delete-button").text(label+$(sender).val())}};(function($){$(function(){$(".field-container.required span.required").each(function(i,e){$(e).removeClass("hidden")});$(".required_by_question").each(function(i,e){var $question=$(e).parents("fieldset").find(".question-visibility");var $container=$(e).parents("fieldset").find(".field-container");var $input=$container.find("input,select");$question.on("change",function(e){$input.attr("required",$(this).is(":checked"))})});$("#registrationForm").on("submit",function(e){$(this).find("input[type=submit]").prop("disabled","disabled").val(gettext("Please wait..."))});$("[data-visibility=hidden]").parents(".field-container").hide();$("[data-trigger=change]").each(function(i,e){$(e).trigger("change")});$(".errorlist").each(function(i,e){var $container=$(e).parents("fieldset").find(".field-container");$container.show()});$(".question-visibility").each(function(i,e){var $container=$(e).parents("fieldset").find(".field-container");var $input=$container.find("input,select");if($input.val().trim()!==""){$(e).prop("checked","checked");$container.show()}}).on("click",function(){smart.handleQuestion(this)})})})($);
